<html lang="pt-BR">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<!-- <meta http-equiv="refresh" content="3" /> -->

		<!-- Icon -->
		<link rel="icon" href="assets/img/icon.svg" />

		<!-- Material Icons -->
		<link
			href="https://fonts.googleapis.com/icon?family=Material+Icons"
			rel="stylesheet"
		/>

		<!-- Bootstrap CSS -->
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
			crossorigin="anonymous"
		/>

		<title>Prancha - Configurações</title>
	</head>
	<body>
		<nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm mb-4">
			<div class="container">
				<a class="navbar-brand d-flex align-items-center" style="gap: 0.5rem">
					<span class="material-icons"> grid_4x4 </span>
					<strong>Wellboard</strong>
				</a>

				<div class="collapse navbar-collapse justify-content-end">
					<ul class="navbar-nav">
						<li class="nav-item">
							<a class="nav-link" aria-current="page" href="index.html">
								Visualizar Prancha
							</a>
						</li>
					</ul>
				</div>
			</div>
		</nav>

		<div class="container">
			<div class="row">
				<div class="col-3">
					<h5 class="pb-3">Configurações</h5>

					<ul class="nav nav-pills flex-column small w-75">
						<li class="nav-item">
							<a
								class="nav-link active"
								data-bs-toggle="tab"
								data-bs-target="#blocks-tab"
								href="#"
							>
								Categorias
							</a>
						</li>
						<li class="nav-item">
							<a
								class="nav-link"
								data-bs-toggle="tab"
								data-bs-target="#items-tab"
								href="#"
							>
								Itens
							</a>
						</li>
						<li class="nav-item">
							<a
								class="nav-link"
								data-bs-toggle="tab"
								data-bs-target="#texttospeech-tab"
								href="#"
							>
								Linguagem
							</a>
						</li>
						<li class="nav-item">
							<a
								class="nav-link disabled"
								data-bs-toggle="tab"
								data-bs-target="#saveload-tab"
								href="#"
							>
								Salvar & Carregar
							</a>
						</li>
					</ul>
				</div>

				<div class="col tab-content">
					<!-- Tab: Blocks -->
					<div class="tab-pane fade show active" id="blocks-tab">
						<h5 class="mb-1">Categorias</h5>
						<p class="small text-muted">
							As categorias são blocos de até 9 itens
						</p>

						<button
							class="btn btn-sm btn-secondary mb-4"
							id="blocksModalTrigger"
						>
							Adicionar
						</button>

						<table class="table table-hover" id="blocks-table">
							<thead>
								<tr>
									<th>Título</th>
									<th>Cor</th>
									<th>Ordem</th>
									<th>Tamanho</th>
									<th></th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td colspan="1000" class="text-muted text-center small">
										Nenhuma Categoria Adicionada!
									</td>
								</tr>
							</tbody>
						</table>
					</div>

					<!-- Tab -->
					<div class="tab-pane fade" id="items-tab">
						<h5 class="mb-1">Itens</h5>
						<p class="small text-muted">
							Os itens são os botões que aparecem na prancha comunicadora. Eles
							estão associados às categorias e sempre serão coloridos segundo
							estas.
						</p>

						<button
							class="btn btn-sm btn-secondary mb-4"
							id="itemsModalTrigger"
						>
							Adicionar
						</button>

						<table class="table table-hover table-striped" id="blocks-table">
							<thead>
								<tr>
									<th>Título</th>
									<th>Imagem</th>
									<th>Ordem</th>
									<th></th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td colspan="1000" class="text-muted text-center small">
										Nenhuma Categoria Adicionada!
									</td>
								</tr>
							</tbody>
						</table>
					</div>

					<!-- Tab -->
					<div class="tab-pane fade" id="texttospeech-tab">
						<h5 class="mb-1">Linguagem</h5>
						<p class="small text-muted">
							Defina as configuração de fala de texto.
						</p>

						<label for="lang" class="form-label">Língua</label>
						<select id="lang" class="form-select" disabled>
							<option selected>Português Brasileiro</option>
						</select>
					</div>
				</div>
			</div>
		</div>

		<!-- Modal: Blocks -->
		<div class="modal fade" id="blocks-modal">
			<div class="modal-dialog modal-lg">
				<form class="modal-content" id="blocks-form">
					<div class="modal-header">
						<h5 class="modal-title">Categoria</h5>
						<button
							type="button"
							class="btn-close"
							data-bs-dismiss="modal"
							aria-label="Close"
						></button>
					</div>
					<div class="modal-body">
						<div class="mb-3">
							<label for="block-name" class="col-form-label">Título:</label>
							<input
								type="text"
								class="form-control"
								id="block-name"
								minlength="3"
							/>
						</div>

						<div class="mb3">
							<label for="block-color" class="col-form-label">Cor:</label>
							<div class="d-flex" style="gap: 0.5rem">
								<input type="color" class="form-control" id="block-color" />

								<button
									type="button"
									class="btn btn-dark btn-sm"
									onclick="setRandomColor()"
								>
									Sortear
								</button>
							</div>
						</div>

						<div class="mb-3">
							<label for="block-order" class="col-form-label">Ordem:</label>
							<input
								type="number"
								class="form-control"
								id="block-order"
								min="1"
								max="9"
							/>
						</div>
					</div>
					<div class="modal-footer">
						<button
							type="reset"
							class="btn btn-secondary"
							data-bs-dismiss="modal"
						>
							Cancelar
						</button>
						<button type="submit" class="btn btn-primary">Salvar</button>
					</div>
				</form>
			</div>
		</div>

		<!-- Modal: Items -->
		<div class="modal fade" id="items-modal">
			<div class="modal-dialog modal-lg">
				<form class="modal-content" id="items-form">
					<div class="modal-header">
						<h5 class="modal-title">Items</h5>
						<button
							type="button"
							class="btn-close"
							data-bs-dismiss="modal"
							aria-label="Close"
						></button>
					</div>
					<div class="modal-body">
						<div class="mb-3">
							<label for="item-block" class="col-form-label">Categoria:</label>
							<select class="form-select" id="item-block"></select>
							<small class="text-muted">
								Só é possível adicionar 9 itens em cada categoria!
							</small>
						</div>

						<div class="mb-3">
							<label for="item-name" class="col-form-label">Título:</label>
							<input
								type="text"
								class="form-control"
								id="item-name"
								minlength="3"
							/>
						</div>

						<div class="mb-3">
							<label for="item-name" class="col-form-label">Imagem:</label>
							<input
								type="text"
								class="form-control"
								id="item-image-url"
								minlength="3"
							/>
						</div>

						<div class="mb-3">
							<label for="item-order" class="col-form-label">Ordem:</label>
							<input
								type="number"
								class="form-control"
								id="item-order"
								min="1"
								max="9"
							/>
						</div>
					</div>
					<div class="modal-footer">
						<button
							type="reset"
							class="btn btn-secondary"
							data-bs-dismiss="modal"
						>
							Cancelar
						</button>
						<button type="submit" class="btn btn-primary">Salvar</button>
					</div>
				</form>
			</div>
		</div>

		<script src="js/data.js"></script>
		<script src="js/utils.js"></script>
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
			crossorigin="anonymous"
		></script>

		<script>
			function setRandomColor() {
				document.querySelector('#block-color').value = randomHexColor();
			}

			function printBlocks(blocks) {
				let select = document.querySelector('#item-block');
				select.innerHTML = '';

				let tbody = document.querySelector('#blocks-table tbody');
				tbody.innerHTML = '';

				if (blocks.length > 0) {
					blocks.forEach((block) => {
						let tr = document.createElement('tr');
						tr.innerHTML = `
							<td>${block.name}</td>
							<td style="background: ${block.color}"></td>
							<td>${block.order}</td>
							<td>${block.items.length}</td>
							<td></td>
						`;

						tbody.append(tr);

						let opt = document.createElement('option');
						opt.innerText = block.name;
						opt.value = block.id;
						opt.disabled = block.items.length === 9;

						select.append(opt);
					});
				} else {
					tbody.innerHTML = `
						<tr>
							<td colspan="1000" class="text-muted text-center small">
								Nenhuma Categoria Adicionada!
							</td>
						</tr>`;
				}
			}

			window.onload = () => {
				// Calls
				setRandomColor();
				printBlocks(data);

				// Modals
				var blocksModal = new bootstrap.Modal('#blocks-modal');
				var itemsModal = new bootstrap.Modal('#items-modal');

				// Trigger Buttons
				document
					.querySelector('#blocksModalTrigger')
					.addEventListener('click', () => {
						blocksModal.show();
					});

				document
					.querySelector('#itemsModalTrigger')
					.addEventListener('click', () => {
						itemsModal.show();
					});

				document
					.querySelector('#blocks-form')
					.addEventListener('submit', (evt) => {
						evt.preventDefault();

						blocksModal.hide();
					});

				// Selects
			};
		</script>
	</body>
</html>
